"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function loadCloudinary(callback) {
    var existingScript = document.getElementById('cloudinary');
    if (!existingScript) {
        var script = document.createElement('script');
        script.src = 'https://media-library.cloudinary.com/global/all.js';
        script.id = 'cloudinary';
        document.body.appendChild(script);
        script.onload = function () {
            if (callback) {
                return callback();
            }
            return true;
        };
    }
    if (existingScript && callback) {
        return callback();
    }
    return true;
}
exports.loadCloudinary = loadCloudinary;
function encodeSourceId(asset) {
    var resource_type = asset.resource_type, public_id = asset.public_id, type = asset.type;
    return btoa(JSON.stringify({ public_id: public_id, resource_type: resource_type, type: type })); // Sort keys alphabetically!
}
exports.encodeSourceId = encodeSourceId;
function encodeFilename(asset) {
    return asset.public_id.split('/').slice(-1)[0] + "." + asset.format;
}
exports.encodeFilename = encodeFilename;
function decodeSourceId(sourceId) {
    var sourceIdDecoded;
    try {
        sourceIdDecoded = JSON.parse(atob(sourceId));
    }
    catch (err) {
        // Do nothing
    }
    return sourceIdDecoded;
}
exports.decodeSourceId = decodeSourceId;
//# sourceMappingURL=utils.js.map